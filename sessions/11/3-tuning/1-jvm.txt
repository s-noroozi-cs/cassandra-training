/etc/cassandra/cassandra-env.sh



Heap Size

    Set the heap size appropriately. 
    Too small a heap can lead to frequent GC, 
    while too large a heap can result in long GC pauses. 
    The recommended heap size is 8â€“16 GB.

    # Example settings in cassandra-env.sh
    MAX_HEAP_SIZE="16G"
    HEAP_NEWSIZE="4G"

    Determining the heap size
        Cassandra automatically calculates the maximum heap size (MAX_HEAP_SIZE) 
        based on this formula:

            max(min(1/2 ram, 1024MB), min(1/4 ram, 8GB)

        The recommended maximum heap size depends on which GC is used:
        
            Hardware setup	                                    Recommended MAX_HEAP_SIZE
            Older computers	                                    Typically 8 GB.
            CMS for newer computers(8+ cores)                   No more 16 GB.
            G1 for newer computers (8+ cores)                   16 GB to 64 GB.

Garbage Collection

    Use the G1 Garbage Collector.
    G1 provides better performance and predictability 
    for large heaps.

    # Example settings in cassandra-env.sh
    JVM_OPTS="$JVM_OPTS -XX:+UseG1GC"
    JVM_OPTS="$JVM_OPTS -XX:MaxGCPauseMillis=200"

